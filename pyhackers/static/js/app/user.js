// Generated by CoffeeScript 1.6.3
(function() {
  var User;

  User = (function() {
    User.prototype.template = window.Handlebars.compile($.trim($("#message-template").html()));

    function User(user_nick) {
      this.user_nick = user_nick;
      console.log("Initialized");
    }

    User.prototype.init = function() {
      console.log("Initialized");
      return this.loadTimeline();
    };

    User.prototype.loadTimeline = function() {
      var _this = this;
      return $.getJSON("/ajax/user/" + this.user_nick + "/timeline", {
        _: new Date().getTime(),
        after_id: this.lastMessage || -1
      }, function(data) {
        console.log(data);
        return $("#timeline").append(_this.template({
          message: data.timeline
        }));
      });
    };

    return User;

  })();

  $(function() {
    var user, user_nick;
    user_nick = $("#user_nick").val();
    user = new User(user_nick);
    return user.init();
  });

}).call(this);
